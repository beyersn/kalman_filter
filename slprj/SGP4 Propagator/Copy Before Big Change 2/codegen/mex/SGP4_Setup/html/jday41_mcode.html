<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="22,1" id="srcline1"> 1</a></span><span class="line"><span class="comment">% -----------------------------------------------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%                           function jday.m</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,4" id="srcline4"> 4</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,5" id="srcline5"> 5</a></span><span class="line"><span class="comment">%  this function finds the julian date given the year, month, day, and time.</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,6" id="srcline6"> 6</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,7" id="srcline7"> 7</a></span><span class="line"><span class="comment">%  author        : david vallado                  719-573-2600   27 may 2002</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,9" id="srcline9"> 9</a></span><span class="line"><span class="comment">%  revisions</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,10" id="srcline10">10</a></span><span class="line"><span class="comment">%                -</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,11" id="srcline11">11</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,12" id="srcline12">12</a></span><span class="line"><span class="comment">%  inputs          description                    range / units</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,13" id="srcline13">13</a></span><span class="line"><span class="comment">%    year        - year                           1900 .. 2100</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,14" id="srcline14">14</a></span><span class="line"><span class="comment">%    mon         - month                          1 .. 12</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,15" id="srcline15">15</a></span><span class="line"><span class="comment">%    day         - day                            1 .. 28,29,30,31</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,16" id="srcline16">16</a></span><span class="line"><span class="comment">%    hr          - universal time hour            0 .. 23</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,17" id="srcline17">17</a></span><span class="line"><span class="comment">%    min         - universal time min             0 .. 59</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,18" id="srcline18">18</a></span><span class="line"><span class="comment">%    sec         - universal time sec             0.0 .. 59.999</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,19" id="srcline19">19</a></span><span class="line"><span class="comment">%    whichtype   - julian .or. gregorian calender   'j' .or. 'g'</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,20" id="srcline20">20</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,21" id="srcline21">21</a></span><span class="line"><span class="comment">%  outputs       :</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,22" id="srcline22">22</a></span><span class="line"><span class="comment">%    jd          - julian date                    days from 4713 bc</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,23" id="srcline23">23</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,24" id="srcline24">24</a></span><span class="line"><span class="comment">%  locals        :</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,25" id="srcline25">25</a></span><span class="line"><span class="comment">%    none.</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,26" id="srcline26">26</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,27" id="srcline27">27</a></span><span class="line"><span class="comment">%  coupling      :</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,28" id="srcline28">28</a></span><span class="line"><span class="comment">%    none.</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,29" id="srcline29">29</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,30" id="srcline30">30</a></span><span class="line"><span class="comment">%  references    :</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,31" id="srcline31">31</a></span><span class="line"><span class="comment">%    vallado       2007, 189, alg 14, ex 3-14</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,32" id="srcline32">32</a></span><span class="line"><span class="comment">%</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,33" id="srcline33">33</a></span><span class="line"><span class="comment">% jd = jday(yr, mon, day, hr, min, sec)</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,34" id="srcline34">34</a></span><span class="line"><span class="comment">% -----------------------------------------------------------------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,35" id="srcline35">35</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="22,36" id="srcline36">36</a></span><span class="line"><span class="keyword">function</span> <span class="var type1" id="S2T2U3">jd</span> = jday(<span class="var type1" id="S3T2U6">yr</span>, <span class="var type1" id="S4T2U7">mon</span>, <span class="var type1" id="S5T2U8">day</span>, <span class="var type1" id="S6T2U9">hr</span>, <span class="var type1" id="S7T2U10">min</span>, <span class="var type1" id="S8T2U11">sec</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="22,37" id="srcline37">37</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="22,38" id="srcline38">38</a></span><span class="line">        <span class="comment">% ------------------------  implementation   ------------------</span></span></span>
<span class="srcline"><span class="lineno"><a href="22,39" id="srcline39">39</a></span><span class="line">        <span class="mxinfo" id="T2:U8"><span class="var type1" id="S2T2U14">jd</span> = <span class="mxinfo" id="T2:U10"><span class="mxinfo" id="T2:U11"><span class="mxinfo" id="T2:U12"><span class="mxinfo" id="T2:U13"><span class="mxinfo" id="T2:U14"><span class="mxinfo" id="T2:U15"><span class="mxinfo" id="T2:U16">367.0</span> * <span class="var type1" id="S3T2U22">yr</span></span>  <span class="keyword">...</span></span></span></span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="22,40" id="srcline40">40</a></span><span class="line"><span class="mxinfo" id="T2:U8"><span class="mxinfo" id="T2:U10"><span class="mxinfo" id="T2:U11"><span class="mxinfo" id="T2:U12"><span class="mxinfo" id="T2:U13"><span class="mxinfo" id="T2:U14">             - <span class="mxinfo" id="T2:U18">floor( <span class="mxinfo" id="T2:U19">(<span class="mxinfo" id="T2:U20"><span class="mxinfo" id="T2:U21">7</span> * (<span class="mxinfo" id="T2:U22"><span class="var type1" id="S3T2U31">yr</span> + <span class="mxinfo" id="T2:U24">floor( <span class="mxinfo" id="T2:U25">(<span class="mxinfo" id="T2:U26"><span class="var type1" id="S4T2U37">mon</span> + <span class="mxinfo" id="T2:U28">9</span></span>) / <span class="mxinfo" id="T2:U29">12.0</span></span>)</span></span> )</span> ) * <span class="mxinfo" id="T2:U30">0.25</span></span> )</span></span>   <span class="keyword">...</span></span></span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="22,41" id="srcline41">41</a></span><span class="line"><span class="mxinfo" id="T2:U8"><span class="mxinfo" id="T2:U10"><span class="mxinfo" id="T2:U11"><span class="mxinfo" id="T2:U12"><span class="mxinfo" id="T2:U13">             + <span class="mxinfo" id="T2:U31">floor( <span class="mxinfo" id="T2:U32"><span class="mxinfo" id="T2:U33"><span class="mxinfo" id="T2:U34">275</span> * <span class="var type1" id="S4T2U46">mon</span></span> / <span class="mxinfo" id="T2:U36">9.0</span></span> )</span></span> <span class="keyword">...</span></span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="22,42" id="srcline42">42</a></span><span class="line"><span class="mxinfo" id="T2:U8"><span class="mxinfo" id="T2:U10"><span class="mxinfo" id="T2:U11"><span class="mxinfo" id="T2:U12">             + <span class="var type1" id="S5T2U48">day</span></span> + <span class="mxinfo" id="T2:U38">1721013.5</span></span>  <span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="22,43" id="srcline43">43</a></span><span class="line"><span class="mxinfo" id="T2:U8"><span class="mxinfo" id="T2:U10">             + <span class="mxinfo" id="T2:U39">( <span class="mxinfo" id="T2:U40"><span class="mxinfo" id="T2:U41">(<span class="mxinfo" id="T2:U42"><span class="mxinfo" id="T2:U43"><span class="var type1" id="S8T2U57">sec</span>/<span class="mxinfo" id="T2:U45">60.0</span></span> + <span class="var type1" id="S7T2U59">min</span></span> ) / <span class="mxinfo" id="T2:U47">60.0</span></span> + <span class="var type1" id="S6T2U61">hr</span></span> ) / <span class="mxinfo" id="T2:U49">24.0</span></span></span></span>;</span></span>
</pre>
